<html>
  <head>
    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <title>Eject The Crate Creature</title>
    <style>
      ::-webkit-scrollbar {
        width: 1em;
      }
      ::-webkit-scrollbar-thumb {
        background: #2fff00;
        border-radius: 2px;
      }
      ::-webkit-scrollbar-track {
        box-shadow: inset 0 0 0px #000000;
        border-radius: 2px;
      }
      @font-face {
        font-family: "Atkinson-Hyperlegible";
        src: url("./AtkinsonHyperlegible-Regular.ttf");
      }
      input {
        accent-color: #2fff00;
      }
      html * {
        background: black;
        color: #2fff00;
        font-family: var(--dynamic-font, monospace);
        font-weight: bolder;
        text-shadow: #00da27 0 0 var(--font-glow, 4px);
      }
      body {
        max-width: 1000px;
        margin: 12px auto;
      }
      div {
        padding-bottom: 12px;
      }
      canvas {
        background-color: black;
        display: block;
        height: 384px;
        width: 864px;
        border-radius: 8px;
        border: 4px solid #2fff00;
        max-width: 100%;
      }
      .flex-horz {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      @keyframes beep {
        from {
          transform: scaleY(0);
        }
        to {
          transform: scaleY(1);
        }
      }
      #audio-visualizer {
        width: 60px; /* add proper units */
        /* The “full height” is set dynamically from TS.
     (When scaled, the element will animate from 0 to that height.) */
        height: 0px;
        margin: auto 0;
        background: black;
      }
      .centered-div {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      #menu {
        text-align: center;
        padding: 24px;
        border: 4px solid #2fff00;
        border-radius: 8px;
        display: inline-block;
        min-width: 710px;
        max-height: calc(100% - 100px);
        overflow: auto;
      }
      button {
        border: 2px solid #2fff00;
        border-radius: 8px;
        padding: 2px 6px;
        background: black;
      }
      button:hover {
        background: #2fff0035;
      }
      button:active {
        background: #2fff00;
      }
      .icon {
        height: 1em;
        mix-blend-mode: lighten;
      }
      #top-text {
        display: grid;
        grid-template-columns: 2fr 8fr 2fr;
      }
      @keyframes blinking {
        0% {
          color: black;
          text-shadow: none;
        }
        50% {
          color: black;
          text-shadow: none;
        }
        51% {
          color: #2fff00;
        }
        100% {
          color: #2fff00;
        }
      }
      #lines {
        height: 5em;
        overflow: auto;
        display: flex;
        flex-direction: column-reverse;
      }
      #lines > div:first-child:before {
        content: "> ";
        min-width: 2em;
        animation: 1s infinite blinking;
      }
      #score {
        margin: auto;
        background: none;
        border: 4px solid #ff0000;
        border-radius: 12px;
        padding: 4px;
        color: #ff0000;
        text-shadow: 0 0 var(--font-glow, 4px) #ff0000;
      }
      .menu-line {
        display: flex;
        justify-content: space-between;
        gap: 10px;
      }
      .menu-line > div {
        padding-bottom: 0px;
      }
      #keys {
        justify-self: center;
      }
      .menu-frame {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }
      .cargo-tiny {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
        gap: 2px;
        padding-bottom: 2px;
      }
      .cargo-tiny > div {
        border: 2px solid #2fff00;
        padding: 0px;
        font-size: 10px;
      }
      .cargo-tiny-ejects {
        display: flex;
        gap: 2px;
        justify-content: space-between;
      }
      .cargo-tiny-ejects > div {
        border: 2px solid #2fff00;
        padding: 0px;
        font-size: 10px;
      }
      #read-line {
        color: black;
        text-shadow: none;
      }
    </style>
    <script>
      var exports = {};
    </script>
    <script defer src="./dist/build.js"></script>
  </head>
  <body>
    <audio id="music" loop src="./audio/music.wav"></audio>
    <audio id="voice" src="./audio/en/opening1.wav"></audio>
    <audio
      preload
      id="beep"
      loop="true"
      src="./boop.wav"
      data-volume-max="0.5"
    ></audio>
    <div id="read-line" aria-live="assertive"></div>
    <div id="top-text">
      <div></div>
      <div id="lines"></div>
      <div id="score">-$0</div>
    </div>
    <!-- game -->
    <div class="flex-horz">
      <div id="audio-visualizer"></div>
      <canvas
        role="application"
        aria-label="neon green grid 4 by 9, all the squares are blank, press a key to highlight the space in the radar"
        id="canvas"
      ></canvas>
    </div>
    <div id="keys"></div>

    <!-- menu -->
    <div id="menu" class="centered-div" aria-label="menu">
      <div>EJECT THE CRATE CREATURE</div>
      <div><i>a game by Ethan Jurman</i></div>
      <br />
      <div class="menu-frame">
        <div>
          <div>SETTINGS:</div>
          <div class="menu-line">
            Font:
            <select id="font-selection" name="fonts">
              <option value="monospace" selected>Monospace</option>
              <option value="Atkinson-Hyperlegible">
                Atkinson Hyperlegible
              </option>
            </select>
          </div>
          <div class="menu-line">
            Font glow:
            <select id="font-glow" name="font glow">
              <option value="4px" selected>ON</option>
              <option value="0px">OFF</option>
            </select>
          </div>
          <div class="menu-line">
            Opening:
            <select id="opening-select" name="opening-select">
              <option value="ON" selected>ON</option>
              <option value="OFF">OFF</option>
            </select>
          </div>
          <div class="menu-line">
            Text to Speech Volume:
            <div>
              <input
                type="range"
                id="tts-volume-input"
                name="tts volume"
                min="0"
                max="1"
                step="0.05"
              />
              <button id="test-audio-speech" aria-label="test text to speech">
                <img class="icon" src="./icon-play.png" />
              </button>
            </div>
          </div>
          <div class="menu-line">
            Text to Speech Speed:
            <div>
              <input
                type="range"
                id="tts-speed-input"
                name="tts speed"
                min="0.20"
                max="4"
                step="0.05"
                value="1"
              />
              <button
                id="test-audio-speech-speed"
                aria-label="test text to speech"
              >
                <img class="icon" src="./icon-play.png" />
              </button>
            </div>
          </div>
          <div class="menu-line">
            Sound Effects Volume:
            <div>
              <input
                type="range"
                id="game-volume-input"
                name="game volume"
                min="0"
                max="1"
                step="0.05"
              />
              <button id="test-audio-game" aria-label="test in game audio">
                <img class="icon" src="./icon-play.png" />
              </button>
            </div>
          </div>
          <div class="menu-line">
            Music Volume:
            <div>
              <input
                type="range"
                id="music-volume-input"
                name="music volume"
                min="0"
                max="1"
                value="0.5"
                step="0.05"
              />
              <button id="test-audio-music" aria-label="test music audio">
                <img class="icon" src="./icon-play.png" />
              </button>
            </div>
          </div>
        </div>
        <div>
          <div>HOW TO PLAY:</div>
          <p>
            A creature is roaming the spacecraft. Use the keys on your keyboard
            to activate it's radar, pinpoint the creatures location (the radar
            will increase both volume and frequency if you are using a radar
            close to the creature), and then eject it (by pushing both the key
            associated with the containment unit, and shift). The longer the
            creature is out causing damage, the more the corporation will fine
            you, and the less profit you'll make! So hurry up and stop that
            creature!
          </p>
          <p>
            Below is a tiny cargo model, and you can test that your keyboard is
            working and matches the expected result. As well, push the SHIFT
            keys to ensure that ejecting is possible.
          </p>
          <p>Push SPACE to advance text to speech audio</p>
          <div class="cargo-tiny">
            <div id="key-Digit1">1</div>
            <div id="key-Digit2">2</div>
            <div id="key-Digit3">3</div>
            <div id="key-Digit4">4</div>
            <div id="key-Digit5">5</div>
            <div id="key-Digit6">6</div>
            <div id="key-Digit7">7</div>
            <div id="key-Digit8">8</div>
            <div id="key-Digit9">9</div>
            <div id="key-KeyQ">Q</div>
            <div id="key-KeyW">W</div>
            <div id="key-KeyE">E</div>
            <div id="key-KeyR">R</div>
            <div id="key-KeyT">T</div>
            <div id="key-KeyY">Y</div>
            <div id="key-KeyU">U</div>
            <div id="key-KeyI">I</div>
            <div id="key-KeyO">O</div>
            <div id="key-KeyA">A</div>
            <div id="key-KeyS">S</div>
            <div id="key-KeyD">D</div>
            <div id="key-KeyF">F</div>
            <div id="key-KeyG">G</div>
            <div id="key-KeyH">H</div>
            <div id="key-KeyJ">J</div>
            <div id="key-KeyK">K</div>
            <div id="key-KeyL">L</div>
            <div id="key-KeyZ">Z</div>
            <div id="key-KeyX">X</div>
            <div id="key-KeyC">C</div>
            <div id="key-KeyV">V</div>
            <div id="key-KeyB">B</div>
            <div id="key-KeyN">N</div>
            <div id="key-KeyM">M</div>
            <div id="key-Comma">,</div>
            <div id="key-Period">.</div>
          </div>
          <div class="cargo-tiny-ejects">
            <div class="key-Shift">EJECTING KEY</div>
            <div id="key-Space">ADVANCE TEXT</div>
            <div class="key-Shift">EJECTING KEY</div>
          </div>
        </div>
      </div>
      <div>
        <button id="game-start">start</button>
        <button style="display: none" id="game-continue">continue</button>
      </div>
    </div>
  </body>
</html>
